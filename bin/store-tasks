#!/usr/bin/env bash -uo pipefail

manage store -P timely -c tasks --dictify
manage store -P gsheets -c tasks --dictify

for PROJECT in $(jq -r '.[] | .id' app/data/timely_projects.json); do
    manage store -P timely -c projecttasks --rid="${PROJECT}"
done

for PROJECT in $(jq -r '.[] | .projectId' app/data/xero_projects.json); do
    SHORT=`echo $PROJECT | cut -d'-' -f1`
    manage store -P xero -c projecttasks --rid="${PROJECT}"
done

for PROJECT in $(jq -r '.[] | .id' app/data/gsheets_projects.json); do
    manage store -P gsheets -c projecttasks --rid="${PROJECT}"
done
